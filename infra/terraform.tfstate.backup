{
  "version": 4,
  "terraform_version": "1.13.2",
  "serial": 2,
  "lineage": "8848bc94-dec1-28f5-0b6d-f2464c218cdc",
  "outputs": {
    "public_ip": {
      "value": "163.176.150.144",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "cloud_init_script",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "b7cded1d2d7212162a64dc1c9c58068151578a864c980b88944aacb57feb08be",
            "rendered": "#!/bin/bash\n# Script de cloud-init para instalar Docker y Docker Compose en Ubuntu 22.04\n\nset -e\n\n# 0. Opcional: actualizar paquetes y realizar upgrade ligero\nsudo apt-get update -y\nsudo apt-get upgrade -y\n\n# 1. Instalar prerequisitos y claves\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n\n# 2. Añadir repo Docker\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\nsudo apt-get update -y\n \n# 3. Instalar Docker y plugins (incluye plugin compose)\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# 4. Añadir usuario 'ubuntu' (si existe) al grupo docker\nif id -u ubuntu \u003e/dev/null 2\u003e\u00261; then\n    sudo usermod -aG docker ubuntu || true\nfi\n\n# 5. Habilitar y arrancar Docker\nsudo systemctl enable docker\nsudo systemctl start docker\n\n# 6. Permitir firewall básico (opcional - ejemplo: abrir puerto 80 y 443)\nif command -v ufw \u003e/dev/null 2\u003e\u00261; then\n    sudo ufw allow OpenSSH\n    sudo ufw allow 80\n    sudo ufw allow 443\n    sudo ufw --force enable\nfi\n\necho \"Docker y Docker Compose instalados y listos.\"\n",
            "template": "#!/bin/bash\n# Script de cloud-init para instalar Docker y Docker Compose en Ubuntu 22.04\n\nset -e\n\n# 0. Opcional: actualizar paquetes y realizar upgrade ligero\nsudo apt-get update -y\nsudo apt-get upgrade -y\n\n# 1. Instalar prerequisitos y claves\nsudo apt-get install -y ca-certificates curl gnupg lsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n\n# 2. Añadir repo Docker\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\n\nsudo apt-get update -y\n \n# 3. Instalar Docker y plugins (incluye plugin compose)\nsudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# 4. Añadir usuario 'ubuntu' (si existe) al grupo docker\nif id -u ubuntu \u003e/dev/null 2\u003e\u00261; then\n    sudo usermod -aG docker ubuntu || true\nfi\n\n# 5. Habilitar y arrancar Docker\nsudo systemctl enable docker\nsudo systemctl start docker\n\n# 6. Permitir firewall básico (opcional - ejemplo: abrir puerto 80 y 443)\nif command -v ufw \u003e/dev/null 2\u003e\u00261; then\n    sudo ufw allow OpenSSH\n    sudo ufw allow 80\n    sudo ufw allow 443\n    sudo ufw --force enable\nfi\n\necho \"Docker y Docker Compose instalados y listos.\"\n",
            "vars": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "oci_core_instance",
      "name": "ubuntu_vm",
      "provider": "provider[\"registry.terraform.io/oracle/oci\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "agent_config": [
              {
                "are_all_plugins_disabled": false,
                "is_management_disabled": false,
                "is_monitoring_disabled": false,
                "plugins_config": []
              }
            ],
            "async": null,
            "availability_config": [
              {
                "is_live_migration_preferred": false,
                "recovery_action": "RESTORE_INSTANCE"
              }
            ],
            "availability_domain": "idiK:SA-SAOPAULO-1-AD-1",
            "boot_volume_id": "ocid1.bootvolume.oc1.sa-saopaulo-1.abtxeljr7hbqxcfcdq6tsxf3jvil4t2qcmqqxkre5c6gmozr4csgenitbc7q",
            "capacity_reservation_id": null,
            "cluster_placement_group_id": null,
            "compartment_id": "ocid1.tenancy.oc1..aaaaaaaackhu4xklmh4otvag6ehc5hdbfedzyltyzildbcodvwadheuje6ka",
            "compute_cluster_id": null,
            "create_vnic_details": [
              {
                "assign_ipv6ip": false,
                "assign_private_dns_record": false,
                "assign_public_ip": "true",
                "defined_tags": {
                  "Oracle-Tags.CreatedBy": "default/mrf3005444@est.univalle.edu",
                  "Oracle-Tags.CreatedOn": "2025-10-28T14:48:54.520Z"
                },
                "display_name": "webbiblioteca-vm-1_vnic",
                "freeform_tags": {
                  "project": "WebBibliotecaTerra"
                },
                "hostname_label": "webbiblioteca-vm-1",
                "ipv6address_ipv6subnet_cidr_pair_details": [],
                "nsg_ids": [],
                "private_ip": "10.0.0.150",
                "skip_source_dest_check": false,
                "subnet_id": "ocid1.subnet.oc1.sa-saopaulo-1.aaaaaaaa25v2icuccnded3cv3u53pncgtwy27ftwwvmobymnabspvcw6kr6q",
                "vlan_id": ""
              }
            ],
            "dedicated_vm_host_id": null,
            "defined_tags": {
              "Oracle-Tags.CreatedBy": "default/mrf3005444@est.univalle.edu",
              "Oracle-Tags.CreatedOn": "2025-10-28T14:48:54.388Z"
            },
            "display_name": "webbiblioteca-vm-1",
            "extended_metadata": {},
            "fault_domain": "FAULT-DOMAIN-2",
            "freeform_tags": {
              "project": "WebBibliotecaTerra"
            },
            "hostname_label": "webbiblioteca-vm-1",
            "id": "ocid1.instance.oc1.sa-saopaulo-1.antxeljrsp75cmacblbq2akyartizgxzpm3lj2wuf3kpdynp5xj7ruizpiuq",
            "image": "ocid1.image.oc1.sa-saopaulo-1.aaaaaaaapi57wbgrd2xz5pppt2omxiwdp4su2jpv5gwlmxo2abkulz2oqh7a",
            "instance_configuration_id": null,
            "instance_options": [
              {
                "are_legacy_imds_endpoints_disabled": false
              }
            ],
            "ipxe_script": null,
            "is_cross_numa_node": false,
            "is_pv_encryption_in_transit_enabled": null,
            "launch_mode": "PARAVIRTUALIZED",
            "launch_options": [
              {
                "boot_volume_type": "PARAVIRTUALIZED",
                "firmware": "UEFI_64",
                "is_consistent_volume_naming_enabled": true,
                "is_pv_encryption_in_transit_enabled": false,
                "network_type": "PARAVIRTUALIZED",
                "remote_data_volume_type": "PARAVIRTUALIZED"
              }
            ],
            "launch_volume_attachments": null,
            "metadata": {
              "ssh_authorized_keys": "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEpjZYB5ect+m9v9ySI2jxDyyl9OPqHfpFT3Ixkp6fyx mrf3005444@est.univalle.edu",
              "user_data": "IyEvYmluL2Jhc2gKIyBTY3JpcHQgZGUgY2xvdWQtaW5pdCBwYXJhIGluc3RhbGFyIERvY2tlciB5IERvY2tlciBDb21wb3NlIGVuIFVidW50dSAyMi4wNAoKc2V0IC1lCgojIDAuIE9wY2lvbmFsOiBhY3R1YWxpemFyIHBhcXVldGVzIHkgcmVhbGl6YXIgdXBncmFkZSBsaWdlcm8Kc3VkbyBhcHQtZ2V0IHVwZGF0ZSAteQpzdWRvIGFwdC1nZXQgdXBncmFkZSAteQoKIyAxLiBJbnN0YWxhciBwcmVyZXF1aXNpdG9zIHkgY2xhdmVzCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGNhLWNlcnRpZmljYXRlcyBjdXJsIGdudXBnIGxzYi1yZWxlYXNlCnN1ZG8gbWtkaXIgLXAgL2V0Yy9hcHQva2V5cmluZ3MKY3VybCAtZnNTTCBodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvdWJ1bnR1L2dwZyB8IHN1ZG8gZ3BnIC0tZGVhcm1vciAtbyAvZXRjL2FwdC9rZXlyaW5ncy9kb2NrZXIuZ3BnCnN1ZG8gY2htb2QgYStyIC9ldGMvYXB0L2tleXJpbmdzL2RvY2tlci5ncGcKCiMgMi4gQcOxYWRpciByZXBvIERvY2tlcgplY2hvIFwKICAiZGViIFthcmNoPSQoZHBrZyAtLXByaW50LWFyY2hpdGVjdHVyZSkgc2lnbmVkLWJ5PS9ldGMvYXB0L2tleXJpbmdzL2RvY2tlci5ncGddIGh0dHBzOi8vZG93bmxvYWQuZG9ja2VyLmNvbS9saW51eC91YnVudHUgXAogICQobHNiX3JlbGVhc2UgLWNzKSBzdGFibGUiIHwgc3VkbyB0ZWUgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvZG9ja2VyLmxpc3QgPiAvZGV2L251bGwKCnN1ZG8gYXB0LWdldCB1cGRhdGUgLXkKIAojIDMuIEluc3RhbGFyIERvY2tlciB5IHBsdWdpbnMgKGluY2x1eWUgcGx1Z2luIGNvbXBvc2UpCnN1ZG8gYXB0LWdldCBpbnN0YWxsIC15IGRvY2tlci1jZSBkb2NrZXItY2UtY2xpIGNvbnRhaW5lcmQuaW8gZG9ja2VyLWJ1aWxkeC1wbHVnaW4gZG9ja2VyLWNvbXBvc2UtcGx1Z2luCgojIDQuIEHDsWFkaXIgdXN1YXJpbyAndWJ1bnR1JyAoc2kgZXhpc3RlKSBhbCBncnVwbyBkb2NrZXIKaWYgaWQgLXUgdWJ1bnR1ID4vZGV2L251bGwgMj4mMTsgdGhlbgogICAgc3VkbyB1c2VybW9kIC1hRyBkb2NrZXIgdWJ1bnR1IHx8IHRydWUKZmkKCiMgNS4gSGFiaWxpdGFyIHkgYXJyYW5jYXIgRG9ja2VyCnN1ZG8gc3lzdGVtY3RsIGVuYWJsZSBkb2NrZXIKc3VkbyBzeXN0ZW1jdGwgc3RhcnQgZG9ja2VyCgojIDYuIFBlcm1pdGlyIGZpcmV3YWxsIGLDoXNpY28gKG9wY2lvbmFsIC0gZWplbXBsbzogYWJyaXIgcHVlcnRvIDgwIHkgNDQzKQppZiBjb21tYW5kIC12IHVmdyA+L2Rldi9udWxsIDI+JjE7IHRoZW4KICAgIHN1ZG8gdWZ3IGFsbG93IE9wZW5TU0gKICAgIHN1ZG8gdWZ3IGFsbG93IDgwCiAgICBzdWRvIHVmdyBhbGxvdyA0NDMKICAgIHN1ZG8gdWZ3IC0tZm9yY2UgZW5hYmxlCmZpCgplY2hvICJEb2NrZXIgeSBEb2NrZXIgQ29tcG9zZSBpbnN0YWxhZG9zIHkgbGlzdG9zLiIK"
            },
            "platform_config": [],
            "preemptible_instance_config": [],
            "preserve_boot_volume": null,
            "preserve_data_volumes_created_at_launch": null,
            "private_ip": "10.0.0.150",
            "public_ip": "163.176.150.144",
            "region": "sa-saopaulo-1",
            "shape": "VM.Standard.E2.2",
            "shape_config": [
              {
                "baseline_ocpu_utilization": "",
                "gpu_description": "",
                "gpus": 0,
                "local_disk_description": "",
                "local_disks": 0,
                "local_disks_total_size_in_gbs": 0,
                "max_vnic_attachments": 2,
                "memory_in_gbs": 16,
                "networking_bandwidth_in_gbps": 1.399999976158142,
                "nvmes": 0,
                "ocpus": 2,
                "processor_description": "2.0 GHz AMD EPYC™ 7551 (Naples)",
                "vcpus": 4
              }
            ],
            "source_details": [
              {
                "boot_volume_size_in_gbs": "47",
                "boot_volume_vpus_per_gb": "10",
                "instance_source_image_filter_details": [],
                "is_preserve_boot_volume_enabled": false,
                "kms_key_id": "",
                "source_id": "ocid1.image.oc1.sa-saopaulo-1.aaaaaaaapi57wbgrd2xz5pppt2omxiwdp4su2jpv5gwlmxo2abkulz2oqh7a",
                "source_type": "image"
              }
            ],
            "state": "RUNNING",
            "subnet_id": "ocid1.subnet.oc1.sa-saopaulo-1.aaaaaaaa25v2icuccnded3cv3u53pncgtwy27ftwwvmobymnabspvcw6kr6q",
            "system_tags": {},
            "time_created": "2025-10-28 14:48:54.936 +0000 UTC",
            "time_maintenance_reboot_due": "",
            "timeouts": null,
            "update_operation_constraint": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNzAwMDAwMDAwMDAwLCJkZWxldGUiOjQ1MDAwMDAwMDAwMDAsInVwZGF0ZSI6MjcwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.template_file.cloud_init_script"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
